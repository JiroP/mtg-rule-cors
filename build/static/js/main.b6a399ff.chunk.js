(this["webpackJsonpmtg-rule-browser"]=this["webpackJsonpmtg-rule-browser"]||[]).push([[0],{96:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(24),s=n.n(a),i=n(21),o=n(39),u=n.n(o),l=n(53),j=n(20),d=n(119),b=n(124),p=n(120),h=n(122),g=n(117),O=n(121),m=n(115),f=n(60),x=n(118),v=n(6),w=n(54),R=n.n(w),k=Object(r.createContext)({rulesArray:[],rulesDict:{}}),N=function(e){var t={},n=function(e){return function(e){return new RegExp("^\\d[.] ").test(e)}(e)?"section":function(e){return new RegExp("^\\d{3}[.] ").test(e)}(e)?"chapter":function(e){return new RegExp("^\\d{3}[.]\\d{1,3}[.] ").test(e)}(e)?"rule":"subRule"},r=e.replace(/\r\n/g,"\n").split(/\n{2,}|\n \n/g),c=r.findIndex((function(e){return"Credits"===e}))+1,a=r.slice(c).findIndex((function(e){return"Glossary"===e})),s=r.slice(c,c+a);return s.forEach((function(e){!function(e,n){var r,c=function(e){return e.slice(4,7).replace(/\D/g,"").length},a=function(e){return e[0]},s=function(e){return e.slice(1,3)},i=function(e){var t=c(e);return e.slice(4,4+t)};switch(n){case"section":var o=a(e);t[o]={title:e,chapters:{}};break;case"chapter":var u=a(e),l=s(e);t[u].chapters[l]={title:e,rules:{}};break;case"rule":var j=a(e),d=s(e),b=i(e);t[j].chapters[d].rules[b]={title:e,subRules:{}};break;case"subRule":var p=a(e),h=s(e),g=i(e),O=(r=e)[4+c(r)];t[p].chapters[h].rules[g].subRules[O]={title:e}}}(e,n(e))})),{rulesDict:t,rulesArray:s}},B=n(2),y=Object(m.a)((function(){return{chapter:{color:"white",marginLeft:"10px"}}})),I=function(e){var t=e.title,n=e.id,r=e.sectionId,c=y();return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(i.b,{to:"/".concat(r,"/").concat(n),children:Object(B.jsx)(g.a,{className:c.chapter,children:t})})})},C="#323F4B",S="#52606D",D="#616E7C",L=Object(m.a)((function(e){return{section:{marginTop:e.spacing(1),marginBottom:e.spacing(1),color:"white"},chapterRoot:{background:S,borderRadius:"10px"}}})),E=function(e){var t=e.chapters,n=e.title,r=e.id,c=L(),a=Object.entries(t).sort((function(e,t){return e[0].localeCompare(t[0])}));return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(g.a,{className:c.section,children:n}),Object(B.jsx)("div",{className:c.chapterRoot,children:a.map((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(B.jsx)(I,{id:n,sectionId:r,rules:c.rules,title:c.title},"chapter-".concat(c.title))}))})]})},F=function(e){var t=e.rulesArray,n=e.rulesDict;return t.length?Object(B.jsx)(B.Fragment,{children:Object.entries(n).map((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1],c=r.title,a=r.chapters;return Object(B.jsx)(E,{id:n,title:c,chapters:a},"Section-".concat(c))}))}):null},T=n(42),A=n(123),H=n(16),M=n(59),P=n.n(M),J=Object(m.a)((function(e){return{search:Object(T.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(H.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(T.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),G=function(e){var t=e.handleSearch,n=J(),c=Object(r.useState)(""),a=Object(j.a)(c,2),s=a[0],i=a[1];return Object(B.jsxs)("div",{className:n.search,children:[Object(B.jsx)("div",{className:n.searchIcon,children:Object(B.jsx)(P.a,{})}),Object(B.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(s),i("")},children:Object(B.jsx)(A.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){i(e.target.value)},value:s})})]})},U=Object(m.a)((function(e){return{rulesRoot:{background:D,borderRadius:"10px",marginBottom:e.spacing(2)},rule:{marginLeft:e.spacing(2),marginTop:e.spacing(1.5),marginBottom:e.spacing(1.5)}}})),q=function(){var e=U(),t=Object(v.g)().search,n=Object(r.useContext)(k).rulesArray,c=new URLSearchParams(t).get("value");return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(g.a,{variant:"h4",children:["Search results for '",c,"':"]}),Object(B.jsx)("div",{className:e.rulesRoot,children:c?n.filter((function(e){return e.toLowerCase().includes(c.toLowerCase())})).map((function(t){return Object(B.jsx)(g.a,{className:e.rule,children:t},"search-".concat(t))})):null})]})},z=Object(m.a)((function(e){return{rule:{marginLeft:e.spacing(2),marginTop:e.spacing(1.5),marginBottom:e.spacing(1.5)},subRule:{marginLeft:e.spacing(3),marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),K=function(e){var t=e.subRules,n=e.title,r=z();return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(g.a,{className:r.rule,children:n}),Object.values(t).map((function(e){return Object(B.jsx)(g.a,{className:r.subRule,children:e.title},"subrule".concat(e.title))}))]})},Q=Object(m.a)((function(e){return{root:{background:D,borderRadius:"10px",marginBottom:e.spacing(2)},notFoundHeader:{color:"white"}}})),V=function(e){var t=e.rules,n=Q();return Object(B.jsx)("div",{className:n.root,children:t?Object.values(t).map((function(e){var t=e.subRules,n=e.title;return Object(B.jsx)(K,{subRules:t,title:n},"rule-container-".concat(n))})):Object(B.jsx)(g.a,{className:n.notFoundHeader,variant:"h2",children:"Rules not found for the chapter. :("})})},W=Object(m.a)((function(e){return{chapterHeader:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:"white"},sectionHeader:{paddingBottom:e.spacing(2),paddingTop:e.spacing(2),color:"white"}}})),X=function(){var e=W(),t=Object(r.useContext)(k).rulesDict,n=Object(v.h)(),c=n.chapterId,a=t[n.sectionId],s=a.title,i=a.chapters,o=null===i||void 0===i?void 0:i[c],u=o.title,l=o.rules;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(g.a,{className:e.sectionHeader,variant:"h4",children:s}),Object(B.jsx)(g.a,{className:e.chapterHeader,variant:"h5",children:u}),Object(B.jsx)(V,{rules:l})]})},Y=Object(m.a)((function(e){return{container:{background:C,paddingBottom:e.spacing(3),paddingTop:e.spacing(2),marginTop:e.spacing(1),borderRadius:"10px"},appBar:{background:D},homeButton:{marginRight:e.spacing(2)},title:{}}})),Z=function(){var e=Y(),t=Object(r.useMemo)((function(){return Object(f.a)({palette:{type:"dark"}})}),[]),n=Object(v.f)(),c=Object(r.useState)({}),a=Object(j.a)(c,2),s=a[0],o=a[1],m=Object(r.useState)([]),w=Object(j.a)(m,2),y=w[0],I=w[1];return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.get("/api/mtg");case 3:t=e.sent,n=N(t.data),r=n.rulesArray,c=n.rulesDict,o(c),I(r),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),y.length?Object(B.jsx)(x.a,{theme:t,children:Object(B.jsxs)(d.a,{children:[Object(B.jsx)(b.a,{className:e.appBar,children:Object(B.jsxs)(p.a,{children:[Object(B.jsx)(i.b,{to:"/",children:Object(B.jsx)(h.a,{className:e.homeButton,children:"Home"})}),Object(B.jsx)(g.a,{variant:"h6",className:e.title,children:"Magic the gathering rules browser"}),Object(B.jsx)(G,{handleSearch:function(e){e&&n.push("/search?value=".concat(e))}})]})}),Object(B.jsx)(p.a,{}),Object(B.jsx)(O.a,{className:e.container,children:Object(B.jsx)(k.Provider,{value:{rulesArray:y,rulesDict:s},children:Object(B.jsxs)(v.c,{children:[Object(B.jsx)(v.a,{path:"/:sectionId/:chapterId",children:Object(B.jsx)(X,{})}),Object(B.jsx)(v.a,{path:"/search",children:Object(B.jsx)(q,{})}),Object(B.jsx)(v.a,{exact:!0,path:"/",children:Object(B.jsx)(F,{rulesDict:s,rulesArray:y})})]})})})]})}):null},$=Object(v.i)((function(e){var t=e.history;return Object(r.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[t]),null}));s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsxs)(i.a,{children:[Object(B.jsx)($,{}),Object(B.jsx)(Z,{})]})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.b6a399ff.chunk.js.map